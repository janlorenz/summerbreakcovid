[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "",
    "text": "The fate of a pandemic like the CoViD19 pandemic 2020-2022 is determined by the reproductive number which states how many others are infected by a newly infected person on average. Exponential growth or decline of new cases is determined by the reproductive number being above or below one. Small differences in environmental conditions, for example seasonality, can be important to make the difference. Also changes in daily behavior can make a difference. An interesting question is the effect of the summer break in school, because one may think of different consequences:\n\nDuring summer break kids are not in school as well as many of their parents who take holidays. This cuts off many daily channels of contagion.\nOn the other hand, families tend to travel during holidays which opens new channels of contagion through contacts while travelling or visits of relatives and friends.\n\nThis data analysis sheds light on these questions analyzing data from German federal states for the years 2020, 2021 and 2022."
  },
  {
    "objectID": "index.html#data",
    "href": "index.html#data",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "2 Data",
    "text": "2 Data\nGerman summer school holidays regionally differ across the federal states of Germany which produces a natural setting to disentangle the effect of vacation from the general trend of the pandemic.\n\n\nCode\n# These are the packages used in the report\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(sf)\n\n# Data\n# raw data sources, download or documentation, data processing, and saving are done by the script download_data.R\nload(\"data/RKI_vacation_shp.RData\")\n# This loads\n# RKIstate  : 16854 x 3 (stateCode, Refdatum, Fall)\n#             Has new cases (Fall) per federal state (stateCode) per day (Refdatum)\n# summervac : 48 x 5 \n#             Summer school vacation per federal state (BL=shortcode, Land=name of state, \n#             with start and end date and year\n# DE_shp    : Shape files for maps of federal states \n\n# Compute variation of start and end dates\nvariation <- summervac |> group_by(year) |> \n  summarize(start_variation = max(start) -min(start),\n            end_variation = max(end) -min(end))\n# Plot of durations\nsummervac |> pivot_longer(c(start,end)) |> \n  ggplot(aes(x = value, y = fct_rev(Land))) + \n  geom_point() + geom_line() + \n  facet_wrap(~year, scales = \"free_x\") + \n  scale_x_date(date_minor_breaks = \"1 week\") +\n  labs(x = \"\", y = \"\") +\n  theme_minimal(base_size = 16)\n\n\n\n\n\nFigure 1: Summer school vacations on Germany’s federal states 2020 to 2022.\n\n\n\n\nThe dates of the summer breaks are shown in Figure 1. The holiday end dates vary by maximally 44 days in 2021 (42 days in 2020, 34 days in 2022).\nThe effect of summer holidays has to be judged against a general trend. The best available proxy for a general trend is using the new cases in all of Germany, the German-wide trend. Figure 2 shows these trends for the summer months in 2020, 2021, and 2022. The new cases differ substantially in over all size.\n\n\nCode\nsmooth_cases <- function(x) (x + lag(x,1) + lag(x,2) + lag(x,3) + lag(x,4) + lag(x,5) + lag(x,6))/7\nRKI_DE <- RKIstate |> group_by(Refdatum) |> \n  summarise(Fall_DE = sum(Fall)) |> \n  mutate(Fall_DE_smooth = smooth_cases(Fall_DE),\n         year = year(Refdatum))\nRKI_DE |> filter(month(Refdatum) %in% 6:9) |> \n  ggplot(aes(Refdatum,Fall_DE_smooth)) + geom_line() + facet_wrap(~year, scales = \"free\", nrow = 3) +\n  theme_minimal() + expand_limits(y = 0) + labs(x=\"\",y=\"\")\n\n\n\n\n\nFigure 2: General trend of new cases (7 day average) in Germany during the summer months. Note the different values on the y-axis values."
  },
  {
    "objectID": "index.html#over-all-summer-school-vacations-acceleratesdecelerates-contagio-to-be-answered",
    "href": "index.html#over-all-summer-school-vacations-acceleratesdecelerates-contagio-to-be-answered",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "3 Over all summer school vacations accelerates/decelerates contagio (TO BE ANSWERED)",
    "text": "3 Over all summer school vacations accelerates/decelerates contagio (TO BE ANSWERED)\nFigure 3 demonstrates the basic idea of the analysis: For each state-year combination we look how much the summer break increases or decreased the new cases compared with the German-wide trend. To that end, we normalize the German-wide trend such that the new cases in the state and the German-wide trend coincide at the beginning of the holidays.\n\n\nCode\n# Extend the dataset with vacation data\nRKIstate_ext <- RKIstate |> \n  mutate(Fall_smooth = smooth_cases(Fall)) |> \n  left_join(RKI_DE, by = \"Refdatum\") |> \n  left_join(summervac, by = c(\"year\", \"stateCode\" = \"BL\"))\n\n# Make dataset with a normalized trend for each state\nRKI <- RKIstate_ext |> \n  filter(Refdatum==start) |> \n  mutate(trend_factor = 1/Fall_DE_smooth*Fall_smooth) |> \n  select(stateCode,year,trend_factor) |> \n  right_join(RKIstate_ext, by = c(\"stateCode\", \"year\")) |> \n  mutate(Trend = Fall_DE_smooth * trend_factor)\n\n# Make a dataset with the measure of vacation_effect per year-state\n# vacation_effect = factor from normalized general Trend to state cases 10 days after vacation end\n# note that Trend is normalized at vacation start\nRKI_m <- RKI |> filter(Refdatum == end + 10) |> \n  mutate(vacation_effect = Fall_smooth/Trend, \n         dir_color = if_else(vacation_effect < 1, \"down\", \"up\"))\n# colors for arrows in figure\ncolors <- c(\"up\" = \"red\", \"down\" = \"darkgreen\")\n\nRKI |> group_by(year, stateCode) |> filter(stateCode == \"BW\", month(Refdatum) %in% 6:9) |> \n  ggplot(aes(x = Refdatum)) +\n  geom_rect(data = summervac |> filter(BL == \"BW\") |> mutate(Refdatum = start), \n            aes(xmin = start, xmax = end, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.5) +\n  geom_rect(data = summervac |> filter(BL == \"BW\") |> mutate(Refdatum = start), \n            aes(xmin = end, xmax = end + 10, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.25) +\n  geom_line(aes(y = Fall_smooth), color = \"black\") +\n  geom_line(aes(y = Trend),color = \"blue\", alpha = 0.5) + \n  geom_segment(data = RKI_m |> filter(stateCode == \"BW\"), \n               aes(yend = Fall_smooth, y = Trend, xend = Refdatum, x = Refdatum, color = dir_color),  \n               arrow = arrow(length = unit(0.25,\"cm\"), type = \"closed\", angle = 20) ) +\n  scale_color_manual(values = colors) +\n  facet_wrap(~year, scales = \"free\") + \n  expand_limits(y = 0) + \n  labs(x=\"\",y=\"\", title = \"Summer breaks in Baden-Württemberg\") + \n  guides(color = \"none\") + \n  theme_minimal()\n\n\n\n\n\nFigure 3: Smoothed new cases for the state of Baden-Württemberg (black line) compared to the German-wide trend (blue) normalized such that case numbers coincide at the first day of summer vacation in school. The vacation range is shown in dark gray. The ligher gray area marks ten day after vacation end. The arrow shows if new cases have increased or decreased ten days after the end of the vacation compared to the German-wide trend.\n\n\n\n\nWe measure the increase or decrease as the vacation effect factor \\(v\\), such that …\n\n\nCode\nRKI_m |> \n  mutate(eff_ch = vacation_effect-1,\n         lab_x = pmax(0,eff_ch),\n         eff_lab = paste0(if_else(vacation_effect>1,\"+\",\"\"),round(100*(vacation_effect-1), digit=1),\"%\")) |> \n  ggplot(aes(eff_ch, fct_rev(Land), label = eff_lab, fill = dir_color)) + \n  geom_col() +\n  geom_text(aes(x=lab_x), hjust=0, nudge_x = 0.2) +\n  facet_wrap(~year) +\n  xlim(c(-0.5,7.5)) +\n  scale_fill_manual(values = colors) + \n  labs(x=\"\", y=\"\", title = \"Summer break effect\") +\n  guides(fill=\"none\") +\n  theme_minimal(base_size = 16) +\n  theme(panel.grid.major.x = element_blank(),\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        axis.ticks = element_blank(),\n        axis.text.x = element_blank())\n\n\n\n\n\nFigure 4: Change from summer break start to ten days after summer break end, compared to the German-wide trend.\n\n\n\n\n\n\nCode\nRKI_m |> filter(year == 2020) |> mutate(leff = log(vacation_effect)) |> pull(leff) |> t.test()\n\n\n\n    One Sample t-test\n\ndata:  pull(mutate(filter(RKI_m, year == 2020), leff = log(vacation_effect)), leff)\nt = 2.1769, df = 15, p-value = 0.04587\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 0.007973601 0.755828040\nsample estimates:\nmean of x \n0.3819008 \n\n\nCode\nRKI_m |> filter(year == 2021) |> mutate(leff = log(vacation_effect)) |> pull(leff) |> t.test()\n\n\n\n    One Sample t-test\n\ndata:  pull(mutate(filter(RKI_m, year == 2021), leff = log(vacation_effect)), leff)\nt = 3.6314, df = 15, p-value = 0.002462\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 0.1317241 0.5060840\nsample estimates:\nmean of x \n0.3189041 \n\n\nCode\nRKI_m |> filter(year == 2022) |> mutate(leff = log(vacation_effect)) |> pull(leff) |> t.test()\n\n\n\n    One Sample t-test\n\ndata:  pull(mutate(filter(RKI_m, year == 2022), leff = log(vacation_effect)), leff)\nt = 0.50806, df = 15, p-value = 0.6188\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n -0.1249431  0.2031490\nsample estimates:\n mean of x \n0.03910296 \n\n\nDetailed data for Germany on regional units is available through the RKI https://github.com/robert-koch-institut/SARS-CoV-2-Infektionen_in_Deutschland. The data is aggregate to new cases per day per federal states."
  },
  {
    "objectID": "index.html#additional-visualizations-and-further-analyses-with-the-data",
    "href": "index.html#additional-visualizations-and-further-analyses-with-the-data",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "4 Additional visualizations and further analyses with the data",
    "text": "4 Additional visualizations and further analyses with the data\nFurther analysis then should do:\n\ndiscuss if the effect was different in 2020, 2021, and 2022\ndiscuss some cases especially those states who deviate from the average answer, what are potential reasons\n\n\n\nCode\nplot_year <- function(y) RKI |> group_by(year, stateCode) |> filter(year == y, month(Refdatum) %in% 6:9) |> \n  ggplot(aes(x = Refdatum)) +\n  geom_rect(data = summervac |> filter(year == y) |> mutate(stateCode = BL, Refdatum = start), \n            aes(xmin = start, xmax = end, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.5) +\n  geom_rect(data = summervac |> filter(year == y) |> mutate(stateCode = BL, Refdatum = start), \n            aes(xmin = end, xmax = end + 10, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.25) +\n  geom_line(aes(y = Fall_smooth), color = \"black\") +\n  geom_line(aes(y = Trend),color = \"blue\", alpha = 0.5) + \n  geom_segment(data = RKI_m |> filter(year == y), \n               aes(yend = Fall_smooth, y = Trend, xend = Refdatum, x = Refdatum, color = dir_color),  \n               arrow = arrow(length = unit(0.25,\"cm\"), type = \"closed\", angle = 20) ) +\n  scale_color_manual(values = colors) +\n  facet_wrap(~Land, scales = \"free\", nrow = 4) + \n  expand_limits(y = 0) + labs(x=\"\",y=\"\", title=paste(\"Summer breaks\",y)) + guides(color = \"none\") + \n  theme_minimal()\nplot_year(2020)\n\n\n\n\n\nFigure 5: All federal states in 2020. Panels are as described in the caption of Figure 3.\n\n\n\n\n\n\nCode\nplot_year(2021)\n\n\n\n\n\nFigure 6: All federal states in 2021. Panels are as described in the caption of Figure 3.\n\n\n\n\n\n\nCode\nplot_year(2022)\n\n\n\n\n\nFigure 7: All federal states in 2022. Panels are as described in the caption of Figure 3.\n\n\n\n\n\n\nCode\nRKI_m |> \n  ggplot(aes(as_date(yday(start)), 100*(vacation_effect-1), color = factor(year))) + geom_point() +\n  labs(x = \"Start of summer break\", y = \"New cases vs. German-wide trend (%)\") +\n  theme_minimal() +\n  theme(legend.title=element_blank())\n\n\n\n\n\nFigure 8: The beginning of he summer break and the effect are unrelated.\n\n\n\n\n\n\nCode\nDE_shp |> right_join(RKI_m, by = c(\"NAME_1\" = \"Land\")) |> \n  ggplot(aes(fill=100*(vacation_effect-1))) + geom_sf() +\n  facet_wrap(~year) +\n  scale_fill_gradient2(\n    low = \"blue\",\n    mid = \"white\",\n    high = \"red\",\n    midpoint = 0,\n    name = \"Change (%)\"\n  ) +\n  theme_void()\n\n\n\n\n\nFigure 9: The effect does not show a clear geographic pattern."
  },
  {
    "objectID": "index.html#conclusion",
    "href": "index.html#conclusion",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "5 Conclusion",
    "text": "5 Conclusion\nDiscuss generalizability of results. Probably limited but possible if another pandemic has similar proporties."
  },
  {
    "objectID": "index.html#interactive-visualization-data-dashboard",
    "href": "index.html#interactive-visualization-data-dashboard",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "6 Interactive Visualization / Data Dashboard",
    "text": "6 Interactive Visualization / Data Dashboard\n\nIt should be possible to make a dashboard with selection of states and years and perhaps also some dynamic state rankings."
  },
  {
    "objectID": "index.html#data-source",
    "href": "index.html#data-source",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "7 Data Source",
    "text": "7 Data Source\n\nProbably necessary."
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "The summer break effect the CoViD-19 pandemic 2020-2022 in Germany",
    "section": "References",
    "text": "References"
  }
]