[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The summer break effects on the CoViD-19 pandemic in Germany 2020-2022",
    "section": "",
    "text": "The fate of a pandemic like the CoViD19 pandemic 2020-2022 is determined by the reproductive number which states how many others are infected by a newly infected person on average. Exponential growth or decline of new cases is determined by the reproductive number being above or below one. Small differences in environmental conditions, for example seasonality, can be important to make the difference. Also changes in daily behavior can make a difference.\nAn interesting question is about the role of summer breaks in school. Do summer breaks increase or decrease the reproductive number? One may think of effects in both directions:\n\nDuring summer break kids are not in school as well as many of their parents who take holidays. This cuts off many daily channels of contagion.\nOn the other hand, families tend to travel during holidays which opens new channels of contagion through contacts while travelling or visits of relatives and friends.\n\nThis data analysis uses data about new daily CoViD-19 cases in the German federal states for the years 2020, 2021 and 2022 and the dates of the German summer breaks in schools in the federal states to answer this questions."
  },
  {
    "objectID": "index.html#data",
    "href": "index.html#data",
    "title": "The summer break effects on the CoViD-19 pandemic in Germany 2020-2022",
    "section": "2 Data",
    "text": "2 Data\n\n\n\nCode\n# These are the packages used in the report\nlibrary(tidyverse)\nlibrary(lubridate) # for date wrangling\nlibrary(tidymodels) # for hypothesis test\nlibrary(sf) # For map in appendix\nlibrary(patchwork) \n\n# Data\n# raw data sources, download or documentation, data processing, and saving are done \n# by the script download_data.R\n\n# Load the data produced by down_load.R\nload(\"data/RKI_vacation_shp.RData\")\n# This loads\n# RKIstate  : 16854 x 3 (stateCode, Refdatum, Fall)\n#             Has new cases (Fall) per federal state (stateCode) per day (Refdatum)\n# summervac : 48 x 5 \n#             Summer school vacation per federal state (BL=shortcode, Land=name of state, \n#             with start and end date and year\n# DE_shp    : Shape files for maps of federal states \n\n\nGerman summer breaks in school differ across the federal states of Germany. This produces a natural setting to disentangle the effect of vacation from the general trend of the pandemic. The idea is to compare the increase (or decrease) during the summer break in a certain state with the general increase (or decrease) in Germany because usually at least some states are not in there summer break at least some of the time.\nThe dates of the summer breaks are shown in Figure 1.\n\n\nCode\n# Compute variation of start and end dates and overlap of summer breaks\nvariation <- summervac |> group_by(year) |> \n  summarize(start_variation = max(start) -min(start),\n            end_variation = max(end) -min(end),\n            overlap = min(end)-max(start)+1)\n# Plot of durations\nsummervac |> pivot_longer(c(start,end)) |> \n  ggplot(aes(x = value, y = fct_rev(Land))) + \n  geom_point() + geom_line() + \n  facet_wrap(~year, scales = \"free_x\") + \n  scale_x_date(date_minor_breaks = \"1 week\") +\n  labs(x = \"\", y = \"\") +\n  theme_minimal(base_size = 16)\n\n\n\n\n\nFigure 1: Summer school vacations on Germany’s federal states 2020 to 2022.\n\n\n\n\nThe ending dates of summer breaks differ by maximally 44 days in 2021 (42 days in 2020, 34 days in 2022). There are just 2 days of overlap between all summer breaks in 2021 (3 days in 2020, 9 days in 2022).\nWe want to judge the effect of summer breaks against a general German-wide trend. A good available proxy for the German-wide trend is using the new cases in all of Germany.1\nDetailed data for regional units in Germany is available through the Robert-Koch-Institut (RKI) at https://github.com/robert-koch-institut/SARS-CoV-2-Infektionen_in_Deutschland. For this analysis the data is aggregated to new cases per day per federal state. For the following analyses we use seven-day averages to smooth out the typical weekly seasonality of CoViD-19 reporting. That means for each day we look at the average of the new cases of that day and the six days before that day.\nFigure 2 shows the German-wide trends for the months June, July, August and September in 2020, 2021, and 2022. The trajectories of daily new cases (seven-day averages) differ substantially between the years: maximally around 2,000 new cases in 2020; slightly more than 10,000 daily new cases in 2021, and a maximum of almost 100,000 new cases a day in 2022.\n\n\nCode\nsmooth_cases <- function(x) (x + lag(x,1) + lag(x,2) + lag(x,3) + lag(x,4) + lag(x,5) + lag(x,6))/7\nRKI_DE <- RKIstate |> group_by(Refdatum) |> \n  summarise(Fall_DE = sum(Fall, na.rm = TRUE)) |> \n  mutate(Fall_DE_smooth = smooth_cases(Fall_DE),\n         year = year(Refdatum))\nRKI_DE |> filter(month(Refdatum) %in% 6:9) |> \n  ggplot(aes(Refdatum,Fall_DE_smooth)) + geom_line() + facet_wrap(~year, scales = \"free\", nrow = 3) +\n  theme_minimal() + expand_limits(y = 0) + labs(x=\"\",y=\"\")\n\n\n\n\n\nFigure 2: General trend of new cases (7 day average) in Germany during the summer months. Note the different values on the y-axis values."
  },
  {
    "objectID": "index.html#analysis",
    "href": "index.html#analysis",
    "title": "The summer break effects on the CoViD-19 pandemic in Germany 2020-2022",
    "section": "3 Analysis",
    "text": "3 Analysis\nThe basic idea of the analysis is to assess how much the summer break increases or decreased the new cases compared with the German-wide trend for each state-year combination. In total, we have 48 state-year combinations for 16 federal states in three years. To that end, we normalize the German-wide trend for each state-year combination such that the new cases in the state and the German-wide trend coincide at the beginning of the assessment period and then compute the percentage increase (or decrease) which daily new cases have above (or below) the normalized German-wide trend ad the end of the assessment period. We call this percentage increase (or decrease) against the German-wide trend the summer break effect.\nAn infection with CoViD-19 is typically detected several days afterwards because of the incubation period. So, a new case at the first day of the vacation should usually be attributed to an infection event which was before the the summer break. For the same reason, a new case a few days after the summer break can still be attributed to be an infection during vacation. Because of this it makes sense to shift the assessment period for the summer break effect a few days further from the actual vacation dates. We compute the effect for several delays.\n\n\nCode\n# Extend the dataset with vacation data\nRKIstate_ext <- RKIstate |> \n  mutate(Fall_smooth = smooth_cases(Fall)) |> \n  left_join(RKI_DE, by = \"Refdatum\") |> \n  left_join(summervac, by = c(\"year\", \"stateCode\" = \"BL\"))\n\n# Make a dataset with the measure of vacation_effect per year-state for various delays \n# (the default one is five days delay, the others are computed for robustness checks)\n# vacation_effect = factor from normalized German-wide trend to the state's trend \n#                   at the end of the assessment period (end + delay)\n# The German-wide trend is normalized at the start of the assessment period (start + delay)\n# Computation is done for the respective summer break vacation periods with several delay \n# \"delays\" from -42 up to 47 days. That way we have effects in a similar period directly before the summer break\n# and directly after the summer break, as well as all values in between, \n# including 0 days and 5 days (which use to display the main result)\n\n# A function to compute the vacation effects for a particular delay\nmake_delayed_vacation_effect <- function(delay) RKIstate_ext |> \n filter(Refdatum==(start + delay)) |> \n mutate(trend_factor = 1/Fall_DE_smooth*Fall_smooth)|> \n select(stateCode,year,trend_factor) |> \n right_join(RKIstate_ext |> filter(Refdatum==start + delay | Refdatum == end + delay), \n            by = c(\"stateCode\", \"year\")) |> \n mutate(Trend = Fall_DE_smooth * trend_factor) |> \n filter(Refdatum == end + delay) |> \n mutate(delay = delay)\n\n# Create the data set of the vacation effect for several delays\nRKI_mdel <- seq(-42,47,1) |> map(make_delayed_vacation_effect) |> list_rbind() |> \n mutate(vacation_effect = Fall_smooth/Trend, \n        log_vacation_effect = log(vacation_effect), \n        dir_color = if_else(vacation_effect < 1, \"down\", \"up\"))\n\n\nIn the following, we mostly work with five days delay. That means, we normalize the German-wide trend to the level of the new cases of the specific state-year combination at the day five days after the start of the summer break and we measure the vacation effect on the fifth days after the end of the summer break.\nFigure 3 demonstrates the basic idea of the analysis for the state of Baden-Württemberg.\n\n\nCode\n# colors for arrows in figure\ncolors <- c(\"up\" = \"red\", \"down\" = \"darkgreen\")\n\n# Make dataset with a normalized trend for each state with delay 5\nRKI <- RKIstate_ext |>\n  filter(Refdatum==start + 5) |>\n  mutate(trend_factor = 1/Fall_DE_smooth*Fall_smooth) |>\n  select(stateCode,year,trend_factor) |>\n  right_join(RKIstate_ext, by = c(\"stateCode\", \"year\")) |>\n  mutate(Trend = Fall_DE_smooth * trend_factor)\nRKI |> group_by(year, stateCode) |> filter(stateCode == \"BW\", month(Refdatum) %in% 6:9) |> \n  ggplot(aes(x = Refdatum)) +\n  geom_rect(data = summervac |> filter(BL == \"BW\") |> mutate(Refdatum = start), \n            aes(xmin = start, xmax = end, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.5) +\n  geom_rect(data = summervac |> filter(BL == \"BW\") |> mutate(Refdatum = start), \n            aes(xmin = end, xmax = end + 5, ymin = -Inf, ymax = Inf), fill = \"gray\", alpha = 0.25) +\n  geom_point(data = RKI |> filter(stateCode == \"BW\", Refdatum == start + 5),\n             aes(x = Refdatum, y = Fall_smooth), color = \"blue\", alpha = 0.5, size = 3) +\n  geom_point(data = RKI |> filter(stateCode == \"BW\", Refdatum == start + 5),\n             aes(x = Refdatum, y = Fall_smooth), size = 1.5) +\n  geom_line(aes(y = Fall_smooth), color = \"black\") +\n  geom_line(aes(y = Trend),color = \"blue\", alpha = 0.5) + \n  geom_segment(data = RKI_mdel |> filter(stateCode == \"BW\", delay == 5), \n               aes(yend = Fall_smooth, y = Trend, xend = Refdatum, x = Refdatum, color = dir_color),  \n               arrow = arrow(length = unit(0.25,\"cm\"), type = \"closed\", angle = 20) ) +\n  scale_color_manual(values = colors) +\n  facet_wrap(~year, scales = \"free\") + \n  expand_limits(y = 0) + \n  labs(x=\"\",y=\"\", title = \"Summer breaks in Baden-Württemberg\") + \n  guides(color = \"none\") + \n  theme_minimal()\n\n\n\n\n\nFigure 3: New cases (seven-day average) for the state of Baden-Württemberg (black line) compared to the German-wide trend (blue) normalized such that case numbers coincide five days after the first day of summer break (blue-black dot). The vacation range is shown in dark gray. The ligher gray area marks the five days after vacation ends. The arrow shows if new cases have increased or decreased compared to the German-wide trend.\n\n\n\n\nThe German-wide trend (blue line) in Figure 3 show how the cases in the state would have developed when the new cases in the state would have developped proportional to the new cases in Germany. The red (for increase) and green (for decrease) arrows are the basis for the computation of the vacation effect. The vacation effect is a percentage. It is the length of the arrow divided by the actual level of cases of the German-wide trend at the end of the assessment period. Figure 5, Figure 6, and Figure 7 in the Appendix show this type of analysis for all state-year conbinations.\nFigure 4 shows all 48 percentage changes for every state-year combination in our dataset.\n\n\nCode\nRKI_mdel |> filter(delay == 5) |> \n  mutate(eff_ch = vacation_effect-1,\n         lab_x = pmax(0,eff_ch),\n         eff_lab = paste0(if_else(vacation_effect>1,\"+\",\"\"),round(100*(vacation_effect-1), digit=1),\"%\")) |> \n  ggplot(aes(eff_ch, fct_rev(Land), label = eff_lab, fill = dir_color)) + \n  geom_col() +\n  geom_text(aes(x=lab_x), hjust=0, nudge_x = 0.2) +\n  facet_wrap(~year) +\n  xlim(c(-0.5,7.5)) +\n  scale_fill_manual(values = colors) + \n  labs(x=\"\", y=\"\", title = \"Summer break effect\") +\n  guides(fill=\"none\") +\n  theme_minimal(base_size = 16) +\n  theme(panel.grid.major.x = element_blank(),\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        axis.ticks = element_blank(),\n        axis.text.x = element_blank())\n\n\n\n\n\nFigure 4: Change from summer break start to summer break end (with a delay of five days because of the incubation period), compared to the normalized German-wide trend.\n\n\n\n\nThe strongest effects are visible in 2020 in Hamburg, Mecklemburg-Vorpommern, and Sachsen where cases have increased more the three times than the German-wide trend(more than +200%). In total, twelve of the 16 federal states showed an increasing summer break effect. Large effects in percentage were possible because daily new cases were very close to zero in some states in summer 2020 after the initial wave in spring has been broken.\nIn 2021, the pattern repeated with only two states showing a decrease while most states showed clearly increasing summer break effects. In 2022, effect summer break effects were on average smaller and the there were substantially more states with a decreasing summer break effect.\nSo, we hypothesize that there is a positive summer break effect, that means that overall case numbers tend to increase more through the summer break compared to the German-wide trend where the summer break is still ahead or already over in part of the time an part of the region. We test the hypothesis with a standard one sided t-test, with the following specifications: For each year we take the sample of all 16 federal stated.2 Instead of the percentage change we take the logarithm of the increasing (or decreasing) factor. That means for example, an increase of 30% is transformed to \\(\\log(1 + 0.3) = 0.26\\), a decrease of -10% to \\(\\log(1 - 0.1) = -0.11\\).3 The null hypothesis is that the mean of the log-transformed effect is zero. The alternative hypothesis is the the mean of the log-transformed effect is greater than zero. We can transform the mean log-transformed effect back to percentage change.4\nThe following table shows the mean percentage effects, the lower bounds of the 95% confidence intervals5 and the p-values stating how likely it is to achieve such an average when the null hypothesis was true:\n\n\nCode\ntt20 <- RKI_mdel |> filter(year == 2020, delay == 5) |> \n t_test(response = log_vacation_effect, alternative = \"greater\")\ntt21 <- RKI_mdel |> filter(year == 2021, delay == 5) |> \n t_test(response = log_vacation_effect, alternative = \"greater\")\ntt22 <- RKI_mdel |> filter(year == 2022, delay == 5) |> \n t_test(response = log_vacation_effect, alternative = \"greater\")\n\n# function to transform log back to percentage change\ntr <- function(x) format(100*(exp(x)-1), digits = 3)\n\n\n\n\n\n\n\n\n\n\n\nYear\nMean effect\nLower bound 0.95-CI\np-value\n\n\n\n\n2020\n46%\n13.7%\n0.00899\n\n\n2021\n33.3%\n14.2%\n0.00266\n\n\n2022\n5.45%\n-5.13%\n0.196\n\n\n\nSo, the hypothesis that there is an increasing summer break effect has a high degree of statistical significance.\nThis is confirmed by simulation based (bootstrapped) null distributions as shown in Figure 15 in the Appendix. Further on, the Appendix also shows that there is no visible effect of the early or late vacations (Figure 8) or geographically (Figure 9)."
  },
  {
    "objectID": "index.html#conclusion",
    "href": "index.html#conclusion",
    "title": "The summer break effects on the CoViD-19 pandemic in Germany 2020-2022",
    "section": "4 Conclusion",
    "text": "4 Conclusion\nThe effect of the six week summer break on CoViD-19 contagion could at least in part be disentangled from the general trend because summer break beginnings in Germany vary within five to six weeks and for some vacation periods there is little overlap. The analysis showed that the effect of summer breaks tends to increase case numbers compared to the German-wide trend in the summers of 2020 and 2021, while the effect vanished in 2022.\nFor the interpretation it is important to report some context of the pandemic and pandemic measures. In summer 2020 case number were very low after the very first wave in spring had been broken. However, schools still had strong protective measures and during vacation there were many travel restrictions in place. In summer 2021, older people in Germany were mostly vaccinated, but only a part of parents and almost no children. Still many safety measures in schools were in place. In summer 2022, also many children were vaccinated and boostered and almost no restrictions were in place. It was the beginning of the transition to the endemic phase.\nThe analysis suggests that protection at school and in the work place was working effectively, while travelling and visiting relatives and friends (although restricted) during the summer break tended to trigger more contagion and to increase the reproductive number. In the endemic phase, probably also schools and the work place contributed to contagion and there is no clear summer break effect visible anymore.\nThese results were obtained using a reasonable delay of five days to account for an incubation period. That means we shift the beginning and end days of the summer break by five days Figure 10, Figure 11, Figure 12, and Figure 13 shows how the effect looks when other delays are used and Figure 14 shows the average effect over all delays. The results confirm that an increasing vacation effect exists, because the average positive effect is most clearly visible in the range around the delays of zero days in 2020. However, for the years 2021 a positive effect is also visible for longer delays after the summer break, and in 2022 a positive effect exists with a delay of around three weeks after the summer break. The analysis of potential reasons for these delayed effects is beyond the scope of this analysis.\nOverall, it should also be noted that the effect is statistically significant and increase of 46% (2020) and 31% (2021) on average is substantial. However, there are fluctuations. That means, there were also federal states where the summer break had a decreasing effect in comparison to the German-wide trend."
  },
  {
    "objectID": "index.html#appendix-additional-analyses",
    "href": "index.html#appendix-additional-analyses",
    "title": "The summer break effects on the CoViD-19 pandemic in Germany 2020-2022",
    "section": "5 Appendix: Additional analyses",
    "text": "5 Appendix: Additional analyses"
  }
]